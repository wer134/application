# Spotlight Cam

크로마키를 대체하는 AI 객체 추적 및 배경 제거 시스템

**팀: Anywhere Studio**

---

## 프로젝트 개요

Spotlight Cam은 크로마키의 물리적 제약을 해결하기 위해 개발된 AI 기반 비디오 처리 시스템입니다. 대형 녹색 스크린 없이도 실시간으로 배경을 제거하고 객체를 추적하여, 더 넓은 활동 반경과 낮은 비용으로 고품질 비디오 제작을 가능하게 합니다.

### 핵심 차별점

| 항목 | 크로마키 | Spotlight Cam |
|------|----------|--------------|
| 물리적 공간 | 대형 스크린, 조명 공간 (필수) | 카메라만 설치 (불필요) |
| 비용 | 높음 (설치비, 조명비, 유지보수비) | 낮음 (RPI 4 + PC S/W) |
| 활동 반경 | 제한됨 (녹색천 내부) | 자유로움 (AI가 객체 추적) |
| 핵심 기술 | 광학적 색상 분리 (물리) | AI 객체 인식/추적 (S/W) |

---

## 주요 기능

### 🤖 AI 객체 추적
- YOLO 객체 인식 알고리즘으로 사람 탐지
- DeepSORT 연관 알고리즘으로 움직임 추적
- 라즈베리파이 팬/틸트 모터를 통한 자동 카메라 제어
- 수동 제어 모드 지원

### 🎬 실시간 배경 제거
- AI를 통한 추적 객체의 배경 제거
- 크로마키 없이도 깔끔한 배경 분리
- 배경을 다른 배경으로 교체하는 기능
- 실시간 카메라 입력 및 로컬 동영상 파일 모두 처리 가능

### 🎥 비디오 녹화
- WebM 형식으로 고품질 녹화
- HD/30FPS 초기 목표 성능
- 녹화 시간 표시 및 상태 표시
- 사용자 지정 저장 위치 선택

### 🎛️ OBS 스타일 UI
- 다크 테마 인터페이스
- 장면(Scenes) 관리: 추가, 삭제, 전환, 순서 변경
- 소스(Sources) 관리: 비디오 캡처, 이미지, 텍스트 소스 추가
- 오디오 믹서: 실시간 볼륨 조절 및 음소거
- Studio Mode: 프리뷰/프로그램 전환 기능

### ⚙️ 설정 기능
- 카메라/마이크 선택
- 해상도 설정 (1080p, 720p, 자동)
- 파일 형식 선택
- 저장 위치 설정
- 라즈베리파이 연결 설정

---

## 시스템 아키텍처

```
┌─────────────────────────────────┐
│   Raspberry Pi (H/W)           │
│   ├── 카메라 영상 캡처          │
│   ├── 팬/틸트 모터 제어        │
│   └── WebSocket 서버           │
└──────────────┬──────────────────┘
               │ WebSocket
               │ (비디오 스트림)
               │ (모터 제어 명령)
               ↓
┌─────────────────────────────────┐
│   Spotlight Cam App             │
│   (Electron Framework)          │
│   ├── AI Computing              │
│   │   ├── YOLO 객체 인식        │
│   │   └── 배경 제거 알고리즘     │
│   ├── GUI Interface             │
│   ├── Control Logic             │
│   │   └── 모터 제어 명령 생성   │
│   └── 실시간 모니터링           │
└─────────────────────────────────┘
```

---

## 시스템 요구사항

### 데스크탑 (Windows)
- Windows 10 이상
- 최소 4GB RAM (8GB 권장)
- GPU 지원 (AI 처리 성능 향상)

### 라즈베리파이
- Raspberry Pi 4 이상
- 카메라 모듈 또는 USB 웹캠
- 팬/틸트 모터 (선택사항)
- Python 3.x
- OpenCV

### 네트워크
- 라즈베리파이와 데스크탑이 같은 네트워크에 연결
- WebSocket 통신을 위한 포트 개방

---

## 설치 방법

### 데스크탑 앱 설치

#### 설치 파일로 설치
1. `VideoTracker-Setup.exe` 파일을 다운로드
2. 설치 파일을 실행
3. 설치 마법사의 안내를 따릅니다
4. 설치 완료 후 바탕화면 또는 시작 메뉴에서 실행

#### 개발자 빌드
```bash
# 의존성 설치
npm install

# 개발 모드로 실행
npm start

# 실행 파일 빌드
npm run make
```

### 라즈베리파이 설정

1. 라즈베리파이 OS 설치 (Raspberry Pi OS)
2. 카메라 모듈 활성화:
   ```bash
   sudo raspi-config
   # Interface Options > Camera > Enable
   ```
3. Python 패키지 설치:
   ```bash
   pip install opencv-python numpy
   ```
4. WebSocket 서버 실행 (별도 Python 스크립트)

---

## 사용 방법

### 라즈베리파이 연결
1. 앱 실행 후 **Settings** 메뉴에서 라즈베리파이 IP 주소 입력
2. **연결** 버튼 클릭하여 WebSocket 연결
3. 연결 상태 확인

### 기본 녹화
1. 앱을 실행하면 자동으로 기본 카메라/마이크가 연결됩니다
2. 라즈베리파이에서 비디오 스트림을 수신합니다
3. **Controls** 패널에서 **Start Recording** 버튼 클릭
4. 녹화 중지하려면 **Stop Recording** 버튼 클릭
5. 녹화 파일은 설정한 저장 위치에 저장됩니다 (기본: `C:\VideoRecoding`)

### 객체 추적 모드
1. **Auto Tracking** 버튼 활성화
2. YOLO가 사람을 자동으로 인식
3. DeepSORT가 객체를 추적
4. 라즈베리파이 모터가 자동으로 카메라를 조정

### 수동 카메라 제어
1. **Manual Control** 모드 선택
2. 팬/틸트 조이스틱 또는 버튼으로 카메라 제어
3. 실시간으로 카메라 위치 조정

### 배경 제거
1. **Background Removal** 토글 활성화
2. AI가 실시간으로 배경을 제거
3. 배경 교체 옵션 선택 가능

### 장면 관리
- **+** 버튼: 새 장면 추가
- **-** 버튼: 현재 장면 삭제
- **⮝/⮟** 버튼: 장면 순서 변경
- 장면 클릭: 장면 전환

### 소스 추가
1. **Sources** 패널에서 **+** 버튼 클릭
2. 소스 타입 선택:
   - **비디오 캡처 장치**: 웹캠 선택
   - **라즈베리파이 스트림**: 라즈베리파이 카메라
   - **이미지**: 이미지 파일 선택
   - **텍스트**: 텍스트 오버레이 추가
3. 소스 이름 입력 후 추가

### 오디오 믹서
- 볼륨 슬라이더: -100dB ~ 0dB 범위에서 실시간 조절
- 음소거 버튼: 클릭하여 음소거/해제
- dB 표시: 현재 볼륨 레벨 표시

### Studio Mode
- **Studio Mode** 버튼 클릭하여 활성화
- 프리뷰와 프로그램 출력을 나란히 확인 가능
- 전환 전에 미리 확인 후 적용 가능

### 설정 변경
1. **Settings** 버튼 클릭
2. 비디오/오디오 설정 변경
3. 라즈베리파이 연결 설정
4. 저장 위치 선택
5. **닫기** 버튼으로 저장

---

## 메뉴 기능

### File
- **Show Recordings**: 저장된 녹화 파일 목록 보기
- **Settings**: 설정 창 열기
- **Exit**: 프로그램 종료

### Edit
- **Copy**: 복사
- **Paste**: 붙여넣기
- **Transform**: 소스 변형 (추후 구현 예정)

### View
- **Toggle Fullscreen**: 전체화면 전환
- **Force Reload**: 강제 새로고침
- **Toggle Developer Tools**: 개발자 도구 열기/닫기

---

## 빌드 방법

### 개발 빌드
```bash
npm run package
```

### 배포용 빌드 (인스톨러 포함)
```bash
npm run make
```

빌드된 파일은 `out/make/squirrel.windows/x64/` 폴더에 생성됩니다.

---

## 기술 스택

### 데스크탑 앱
- **Electron** v39.1.0 - 크로스 플랫폼 데스크탑 앱 프레임워크
- **Electron Forge** v7.10.2 - 빌드 및 패키징 도구
- **Web APIs**: MediaRecorder, getUserMedia, Web Audio API
- **WebSocket** - 라즈베리파이와 실시간 통신
- **TensorFlow.js** 또는 **MediaPipe** - AI 모델 실행

### 라즈베리파이
- **Python 3.x** - 메인 프로그래밍 언어
- **OpenCV** - 컴퓨터 비전 및 카메라 제어
- **YOLO** - 객체 탐지 알고리즘
- **SORT/DeepSORT** - 객체 추적 알고리즘
- **WebSocket** - 데스크탑 앱과 통신

---

## 활용 분야

### 뉴스 / 일기예보
크로마키로 인한 방송 사고를 원천 차단, 더 역동적인 날씨 예보 등 새로운 연출 가능

### 미디어 콘텐츠 제작자
좁은 방에서도 고품질의 배경 합성이 가능, 비용 감소와 다양한 연출 효과 제공

### 온라인 강의 / 회의
물리적 공간 제약 없이 자유롭게 움직이며 강의 진행, 깔끔한 배경을 실시간으로 제공

---

## 프로젝트 일정

| 항목 | 12월 | 1월 | 2월 | 3월 | 4월 | 5월 |
|------|------|-----|-----|-----|-----|-----|
| 실행프로그램 (.exe) 제작 | ✅ | | | | | |
| 객체 추적 AI 개발, 학습 | | | | | | |
| 배경 제거 AI 개발, 학습 | | | | | | |
| 테스트 및 성능 검증 | | | | | | |
| 보고서 작성 | | | | | | |

---

## 라이선스

ISC

## 개발팀

**Anywhere Studio**
- 2021161084 오현동
- 2021161014 김동수
- 2021161045 류황민
- 2020180079 이수현

## 버전

1.0.0

---

## 문제 해결

### 라즈베리파이 연결 실패
1. 라즈베리파이 IP 주소 확인
2. 방화벽 설정 확인
3. WebSocket 서버가 실행 중인지 확인
4. 네트워크 연결 상태 확인

### 카메라/마이크가 인식되지 않는 경우
1. 브라우저 권한 설정 확인
2. 다른 프로그램에서 카메라/마이크를 사용 중인지 확인
3. 설정에서 다른 장치 선택 시도

### 녹화 파일이 저장되지 않는 경우
1. 저장 경로에 쓰기 권한이 있는지 확인
2. 디스크 공간 확인
3. 설정에서 저장 위치 변경 시도

### 성능 문제
- 해상도를 낮춰보세요 (720p)
- 다른 프로그램을 종료하고 시도해보세요
- GPU 가속 활성화 확인

### AI 처리 속도가 느린 경우
- 해상도 낮추기
- 프레임 스킵 설정 조정
- GPU 사용 확인

---

## 향후 계획

- [x] 기본 비디오 녹화 기능
- [x] OBS 스타일 UI
- [ ] 라즈베리파이 WebSocket 연동
- [ ] YOLO 객체 추적 통합
- [ ] 실시간 배경 제거 AI
- [ ] 팬/틸트 모터 제어
- [ ] 자동 추적 모드
- [ ] 배경 교체 기능
- [ ] 스트리밍 기능
- [ ] 자동 업데이트
- [ ] 다국어 지원

---

## 자동 업데이트 설정

### GitHub Releases를 업데이트 서버로 사용

1. **GitHub 저장소 생성**
   - GitHub에 프로젝트 저장소를 생성합니다
   - `main.js`의 `UPDATE_SERVER_URL`을 GitHub raw URL로 설정합니다

2. **latest.json 파일 생성**
   - 저장소에 `updates/latest.json` 파일을 생성합니다:
   ```json
   {
     "version": "1.0.1",
     "releaseDate": "2024-01-15",
     "downloadUrl": "https://github.com/yourusername/spotlight-cam/releases/download/v1.0.1/VideoTracker-Setup-1.0.1.exe",
     "releaseNotes": "버그 수정 및 성능 개선\n- 라즈베리파이 연결 안정성 향상\n- UI 개선"
   }
   ```

3. **업데이트 배포 프로세스**
   - 새 버전 빌드: `npm run make`
   - GitHub Releases에 새 버전 업로드
   - `updates/latest.json` 파일 업데이트
   - 사용자는 앱에서 자동으로 업데이트를 확인하고 다운로드 가능

4. **main.js 설정**
   ```javascript
   const UPDATE_SERVER_URL = 'https://raw.githubusercontent.com/wer134/application/main/updates/latest.json';
   ```
   
   **현재 설정된 저장소**: [wer134/application](https://github.com/wer134/application)

### 자체 서버 사용

자체 서버를 사용하는 경우:
- `latest.json` 파일을 웹 서버에 배치
- HTTPS 사용 권장
- CORS 설정 필요 (필요시)

## 참고 자료

- [YOLO 공식 문서](https://github.com/ultralytics/ultralytics)
- [DeepSORT 논문](https://arxiv.org/abs/1703.07402)
- [Electron 공식 문서](https://www.electronjs.org/)
- [OpenCV 공식 문서](https://opencv.org/)

---

## Q&A

프로젝트에 대한 질문이나 제안사항이 있으시면 이슈를 등록해주세요.

감사합니다!
